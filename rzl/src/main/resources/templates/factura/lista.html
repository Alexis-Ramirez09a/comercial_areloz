<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Lista de Facturas | Comercial Areloz</title>
  <link th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" rel="stylesheet" />
  <link th:href="@{/webjars/bootstrap-icons/1.10.5/font/bootstrap-icons.css}" rel="stylesheet" />

  <style>
    body {
      background-color: #f8f9fa;
    }

    .navbar-brand {
      font-weight: bold;
    }

    .table th,
    .table td {
      vertical-align: middle;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark bg-primary mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" th:href="@{/}">Inicio</a>
      <a class="navbar-brand" th:href="@{/factura/lista}">Facturas</a>
    </div>
  </nav>

  <!-- Contenido -->
  <main class="container">
    <div class="card shadow-sm">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h1 class="h4 mb-0">Lista de Facturas</h1>
          <a th:href="@{/factura/con-datos}" class="btn btn-primary">
            <i class="bi bi-file-earmark-plus"></i> Nueva Factura
          </a>
        </div>

        <div class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="table-light">
              <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>Cédula cliente</th>
                <th>Subtotal</th>
                <th>Descuento</th>
                <th>IVA</th>
                <th>Total</th>
                <th class="text-center">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="f : ${facturas}">
                <td th:text="${f.id}">1</td>
                <td th:text="${#temporals.format(f.fecha,'yyyy-MM-dd HH:mm')}">2025-07-14 12:00</td>
                <td th:text="${f.cliente.cedula}">0000000000</td>
                <td th:text="${#numbers.formatDecimal(f.subtotal, 1, 2)}">0.00</td>
                <td th:text="${#numbers.formatDecimal(f.descuento,1, 2)}">0.00</td>
                <td th:text="${#numbers.formatDecimal(f.iva,1, 2)}">0.00</td>
                <td th:text="${#numbers.formatDecimal(f.total,1, 2)}">0.00</td>
                <td class="text-center">
                  <a th:href="@{/factura/ver/{id}(id=${f.id})}" target="_blank" class="btn btn-sm btn-info me-1">
                    <i class="bi bi-eye"></i> Ver
                  </a>
                  <form th:action="@{/factura/eliminar}" method="post" class="d-inline">
                    <input type="hidden" name="id" th:value="${f.id}" />
                    <button type="submit" class="btn btn-sm btn-danger"
                      onclick="return confirm('¿Cancelar esta factura?');">
                      <i class="bi bi-trash"></i> Cancelar
                    </button>
                  </form>
                </td>
              </tr>
              <tr th:if="${#lists.isEmpty(facturas)}">
                <td colspan="8" class="text-center text-muted py-4">
                  No hay facturas registradas.
                </td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </main>

  <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
</body>

</html>